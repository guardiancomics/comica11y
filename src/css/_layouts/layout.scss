// SVG fix
// --------------------------------------------------
svg {
min-height: 0;
min-width: 0;
}
img {
display: block;
margin: 0;
max-width: 100%;
width: auto;
}

.skiptranslate {
z-index: 999999;
}


// Containers
// --------------------------------------------------

.container {
max-width: $container-std + ($container-gutter*2);
margin: 0 auto;
width: 100%;

&--narrow {
max-width: $container-narrow + ($container-gutter*2);
}

@include breakpoint(769px,959px) {
padding-top: 30px;
padding-bottom: 30px;
}
@include breakpoint(0,768px) {
padding: 20px;
}
}

.breakout {
> img {
margin: 0 auto;
}

@include breakpoint(1740px,0){
margin-left: -150px;
margin-right: -150px;
}
}

.statement {
text-align: center;
background-color: $grey-cool;
font-size: 1.8rem;
line-height: 1.6;

.container {
padding: 50px $container-gutter;
}

.logo {
margin: 0 auto;
width: 260;
height: 310px;
display: block;
}

@include breakpoint(0,959px) {
font-size: 1.6rem;
line-height: 1.4;

.title {
font-size: 2.8rem;
margin-bottom: 20px;
}
}

@include breakpoint(0,767px){
.title {
margin-bottom: 15px;
}
}
@include breakpoint(0,479px) {
.title {
margin-bottom: 10px;
}
}
}

.main-content {
width: 100%;
}

.comic-filter {
display: flex;
flex-direction: row;
flex-wrap: wrap;
justify-content: space-between;
margin: 20px 0;

img {
display: inline-block;
margin: 0;
}

.toggle {
@include vfont(600);
font-size: 1.3rem;
position: relative;
display: flex;
align-items: center;
cursor: pointer;

.checkbox {
width: 35px;
height: 20px;
position: relative;
margin-right: 10px;

&:before {
content: '';
position: absolute;
left: 0;
top: 0;
width: 35px;
height: 20px;
background-color: #555555;
border-radius: 20px;
transition: background-color .1s ease-out;
}
&:after {
content:'';
position: absolute;
left: 4px;
top: 4px;
width: 12px;
height: 12px;
display: block;
border-radius: 8px;
background-color: white;
transition: transform .1s ease-out;
}
}

input[type="checkbox"]:checked + .checkbox {
&:before {
background-color: $brand-primary;
}
&:after {
transform: translateX(15px);
}	
}

input[type="checkbox"]:disabled + .checkbox {
cursor: default;

&:before,
&:after {
opacity: .5;
}
}
}
}

.comic-strip {
display: grid;
grid-template-columns: repeat(4, 1fr);
grid-template-rows: 1fr;
grid-column-gap: 20px;
grid-row-gap: 20px;
font-size: 1.6rem; // Base

&:not(.is-loading) {
@include breakpoint(0,1200px){
grid-template-columns: repeat(2, 1fr);
margin: 0 auto;
max-width: 820px;
}
@include breakpoint(0,767px){
grid-template-columns: repeat(1, 1fr);
margin: 0 auto;
max-width: 280px;
}
}

&.is-loading {
width: 1650px;
white-space:nowrap;
}

// RTL mode
&.is-rtl-mode {
direction: rtl;

.comic-frame img,
.comic-frame svg {
transform: scaleX(-1);
}
}

// Colourblind filters
&.is-cb-protanopia .comic-frame picture img { filter: url(#protanopia); }
&.is-cb-protanomaly .comic-frame picture img { filter: url(#protanomaly); }
&.is-cb-deuteranopia .comic-frame picture img { filter: url(#deuteranopia); }
&.is-cb-deuteranomaly .comic-frame picture img { filter: url(#deuteranomaly); }
&.is-cb-tritanopia .comic-frame picture img { filter: url(#tritanopia); }
&.is-cb-tritanomaly .comic-frame picture img { filter: url(#tritanomaly); }
&.is-cb-achromatopsia .comic-frame picture img { filter: url(#achromatopsia); }
&.is-cb-achromatomaly .comic-frame picture img { filter: url(#achromatomaly); }
}

.comic-frame {
border: 4px solid #000;
margin: 0;
position: relative;
background-color: black;
box-shadow: 0 0 0 0 #000;
outline: none;
transition: box-shadow $timing $ease-std;

&.is-active {
box-shadow: 0 0 0 4px #000;
}

.comic-strip.is-closed-caption-mode &.is-active .caption-closed {
position: fixed;
left: 0;
top: auto;
bottom: 0;
width: 100%;
height: auto;
}

.comic-strip:not(.is-closed-caption-mode) & .caption-closed,
.comic-strip.is-closed-caption-mode &:not(.is-active) .caption-closed {
@include hide();
}

> img {
display: block;
margin: 0;
width: 100%;
}
}

// Caption styles
.caption-sr__inner,
.caption-closed > p {
padding: 20px 15px;
font-size: .875em;
border-radius: 3px;
background-color: white;
}

// Screen reader caption
.caption-sr {
position: absolute;
top: 10px;
left: 10px;
z-index: 10;
width: calc(100% - 20px);
outline: none;
background-color: transparent;

&__inner {
position: fixed;
bottom: 0;
left: 0;
background-color: rgba(black, .9);
color: white;
text-align: center;
border-radius: 0;
width: 100%;
padding-top: 20px;
padding-bottom: 20px;
@include hide();
}
}

// Closed captions
.caption-closed {
outline: none;
background-color: black;
display: flex;
// flex-direction: column;
justify-content: center;
z-index: 10;

.avatar {
border-radius: 50%;
width: 40px;
height: 40px;
position: absolute;
left: 10px;
top: 10px;
}

> p {
margin: 10px;
padding-left: 60px;
position: relative;
display: block;
min-width: 300px;
margin: 10px;
}
}

// Bubbles
.bubble-wrap {
text-align: center;
position: absolute;
left: 0;
top: 0;
width: 100%;
height: 100%;
overflow: hidden;
display: flex;
flex-direction: column;
align-items: center;
justify-content: flex-start;
outline: none;

> .bubble:first-child {
margin-top: -1.75em;
padding-top: 2em;
}
.bubble + .bubble {
z-index: 2;
margin-top: -.5em;
}
}

.bubble {
display: inline-block;
font-family: $comic-stack;
line-height: 1;
text-align: center;
padding: .8em 1em .9em;
position: relative;
white-space: nowrap;
font-size: 1.35em;

&--left { margin-left: -3em; }
&--right { margin-right: -3em; }

svg {
position: absolute;
left: 0;
top: 0;
width: 100%;
height: auto;
display: block;

text {
fill: #000;
text-align: center;
}
}

.inner {
position: relative;
z-index: 2;

// opacity: 0;
}

strong {
font-family: $comic-stack;
font-weight: bold;
font-style: italic;
}

// .is-resized & br {
//   display: none;
// }

}

.objectives {
background-color: $grey-cool;

@include breakpoint(768px,0){
.grid {
display: flex;
flex-direction: row;
align-items: flex-start;

> .grid-item {
width: 50%;
}
}
}
}

.credits {
background-color: $grey-cool;
display: block;
width: 100%;
padding: 5px 30px;
text-align: center;
font-size: 1.3rem;
}

.dropdown {
background: none;
border: 1px solid $border-color;
margin: 0;
padding: 4px;
font-size: 1.3rem;
border-radius: 3px;
}

.font-sizer {
display: flex;
flex-direction: row;
align-items: center;
font-size: 1.3rem;

.js-resize-down,
.js-resize-up {
@include vfont(500);
font-size: 2.0rem;
padding: 0;
width: 28px;
height: 28px;
display: flex;
align-items: center;
justify-content: center;
}

.js-resize-down:before { content: '-'; }
.js-resize-up:before { content: '+'; }

.text {
margin: 0;
padding: 0 12px;
}
}